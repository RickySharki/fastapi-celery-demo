# 高性能数据处理架构设计题

## 背景

你正在为一家大数据分析公司设计一个新的数据处理系统。该系统需要处理来自多个客户的并发请求，每个请求都是一个复杂的数据处理任务（Task）。系统的性能和可扩展性对公司的业务至关重要。

## 系统需求

每个Task包含三个主要阶段：

### 阶段1：数据收集

- 从多种数据源（关系型数据库、NoSQL数据库、文件系统、API等）并行收集数据
- 这一阶段的各个数据收集操作之间没有依赖关系
- 数据源的数量可能从几个到几十个不等

### 阶段2：数据处理与评估

- 将收集到的数据发送给大语言模型（LLM）进行分析和评分
- 这一步是I/O密集型操作，涉及HTTP请求
- 每个请求的响应时间不确定，从几百毫秒到几秒不等
- 每个Task可能需要发送数百到数千个请求

### 阶段3：结果生成

- 基于前两个阶段的数据生成多维度的分析结果
- 不同维度之间没有依赖关系，可以并行处理
- 每个维度内部有三个连续的处理步骤，这些步骤之间存在依赖关系
- 维度的数量通常在5-20个之间

## 性能要求

- 系统必须能够同时处理500~1000个并发Task
- 系统不应出现明显的阻塞情况
- 资源利用率应当最大化
- 系统应当具有良好的容错能力和可扩展性

## 设计要求

请设计一个能满足上述需求的高性能架构，你的设计应包括：

1. 系统的整体架构图
2. 关键组件的设计和交互方式
3. 并发控制和资源管理策略
4. 如何处理I/O密集型操作以避免阻塞
5. 扩展性和容错性考虑
6. 关键算法或数据结构的选择理由
